# Invoice API - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –û–±–∑–æ—Ä

–í—Å–µ 6 Invoice API endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `uzum-api.ts`:

1. **`getInvoices(token, params?)`** - GET /v1/invoice
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `limit`, `offset`

2. **`getReturns(token, params?)`** - GET /v1/return  
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ –ø—Ä–æ–¥–∞–≤—Ü–∞
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `limit`, `offset`

3. **`getShopInvoices(token, shopId, params?)`** - GET /v1/shop/{shopId}/invoice
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤–∫–∏ –ø–æ ID –º–∞–≥–∞–∑–∏–Ω–∞
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `limit`, `offset`

4. **`getShopInvoiceProducts(token, shopId, params?)`** - GET /v1/shop/{shopId}/invoice/products
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–∞ –Ω–∞–∫–ª–∞–¥–Ω–æ–π
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `invoiceId`

5. **`getShopReturns(token, shopId, params?)`** - GET /v1/shop/{shopId}/return
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø–æ ID –º–∞–≥–∞–∑–∏–Ω–∞
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `limit`, `offset`

6. **`getShopReturnDetails(token, shopId, returnId)`** - GET /v1/shop/{shopId}/return/{returnId}
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–∞ –Ω–∞–∫–ª–∞–¥–Ω–æ–π –≤–æ–∑–≤—Ä–∞—Ç–∞
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `returnId` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç **`UzumInvoices.tsx`** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏:

```typescript
import { 
  getShops, 
  getShopInvoices, 
  getShopInvoiceProducts, 
  getShopReturns, 
  getShopReturnDetails 
} from '../../lib/uzum-api';
```

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ –ø–æ—Å—Ç–∞–≤–∫–∏ –∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ (–≤–∫–ª–∞–¥–∫–∏)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö/–≤–æ–∑–≤—Ä–∞—Ç–æ–≤
- ‚úÖ –†–∞—Å–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª–µ–π –ø–æ –∫–ª–∏–∫—É (—Ç–æ–≤–∞—Ä—ã –≤ –Ω–∞–∫–ª–∞–¥–Ω–æ–π)
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –∏ —Ü–µ–Ω
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–∞–≤–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –∏ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- ‚úÖ –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (RU/UZ)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:

```bash
# –° —Ç–æ–∫–µ–Ω–æ–º –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
node test_invoice_api.mjs YOUR_UZUM_TOKEN_HERE

# –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
export UZUM_TOKEN="your_token_here"
node test_invoice_api.mjs
```

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç:
1. –ü–æ–ª—É—á–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–æ–≤ (–¥–ª—è shopId)
2. –í—Å–µ 6 Invoice endpoints
3. –°—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –≤ –æ—Ç–≤–µ—Ç–∞—Ö
4. –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://localhost:5173
2. –í–æ–π–¥–∏—Ç–µ —Å —Ç–æ–∫–µ–Ω–æ–º UZUM
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ù–∞–∫–ª–∞–¥–Ω—ã–µ" üìã
4. –ü–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ—Å—å –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏:
   - **–ù–∞–∫–ª–∞–¥–Ω—ã–µ –ø–æ—Å—Ç–∞–≤–∫–∏** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç getShopInvoices()
   - **–ù–∞–∫–ª–∞–¥–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—Ç–∞** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç getShopReturns()
5. –ö–ª–∏–∫–Ω–∏—Ç–µ "–ü–æ–¥—Ä–æ–±–Ω–µ–µ" –Ω–∞ –ª—é–±–æ–π –Ω–∞–∫–ª–∞–¥–Ω–æ–π
   - –î–ª—è –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö: –∑–∞–≥—Ä—É–∑–∏—Ç getShopInvoiceProducts()
   - –î–ª—è –≤–æ–∑–≤—Ä–∞—Ç–æ–≤: –∑–∞–≥—Ä—É–∑–∏—Ç getShopReturnDetails()

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ù–∞–∫–ª–∞–¥–Ω–∞—è (Invoice):

```typescript
{
  id: string | number,
  invoiceNumber?: string,
  date?: string | number,
  status?: string,
  totalItems?: number,
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è –∑–∞–≤–∏—Å—è—Ç –æ—Ç API
}
```

### –í–æ–∑–≤—Ä–∞—Ç (Return):

```typescript
{
  id: string | number,
  returnNumber?: string,
  date?: string | number,
  status?: string,
  totalItems?: number,
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è –∑–∞–≤–∏—Å—è—Ç –æ—Ç API
}
```

### –¢–æ–≤–∞—Ä –≤ –Ω–∞–∫–ª–∞–¥–Ω–æ–π:

```typescript
{
  productId?: string | number,
  name?: string,
  sku?: string,
  quantity?: number,
  price?: number,
  total?: number,
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è –∑–∞–≤–∏—Å—è—Ç –æ—Ç API
}
```

## API Rate Limiting

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –æ—á–µ—Ä–µ–¥—å —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 200ms –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –¥–ª—è —Å–æ–±–ª—é–¥–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤ API UZUM.

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –∏ API —Ñ—É–Ω–∫—Ü–∏—è—Ö –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

```typescript
console.log('üìã Invoices result:', result);
console.log('üîô Returns result:', result);
console.log('üì¶ Invoice products API response:', result);
console.log('üîô Return details:', result);
```

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ uzum-api.ts              # 6 Invoice API —Ñ—É–Ω–∫—Ü–∏–π (—Å—Ç—Ä–æ–∫–∏ 742-934)
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ uzum/
‚îÇ       ‚îî‚îÄ‚îÄ UzumInvoices.tsx     # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö
‚îî‚îÄ‚îÄ test_invoice_api.mjs         # –°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
```

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–†–∞–∑–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤**: API –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö:
   - –ü—Ä—è–º–æ–π –º–∞—Å—Å–∏–≤: `[...]`
   - –° –ø–æ–ª–µ–º `items`: `{ items: [...] }`
   - –° –ø–æ–ª–µ–º `content`: `{ content: [...] }`
   - –° –ø–æ–ª–µ–º `data`: `{ data: [...] }`

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –∫–æ–¥–µ**: –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

3. **Pagination**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `limit` –∏ `offset`

## Troubleshooting

### –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏ API
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ shopId –ø–æ–ª—É—á–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ —Ç–æ–∫–µ–Ω–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö

### –û—à–∏–±–∫–∞ 429 (Too Many Requests):
- API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç rate limiting
- –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–¥–µ—Ä–∂–∫–∏

### –ù–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–æ—Å—Ç–∞–≤ –Ω–∞–∫–ª–∞–¥–Ω–æ–π:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ invoiceId/returnId –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –Ω–∞–∫–ª–∞–¥–Ω–æ–π –µ—Å—Ç—å —Ç–æ–≤–∞—Ä—ã

## –°–º. —Ç–∞–∫–∂–µ

- [UZUM_ARCHITECTURE.md](UZUM_ARCHITECTURE.md) - –æ–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [test_invoice_api.mjs](test_invoice_api.mjs) - —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [UzumInvoices.tsx](src/components/uzum/UzumInvoices.tsx) - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç UI
